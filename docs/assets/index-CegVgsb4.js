(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const ve=["drag","hover","click"],ye=["horizontal","vertical"],we=["light","dark"],ze=["arrows","circle","line"],Pe=["top","bottom"],Ce=["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],u={beforeAlt:"Before",afterAlt:"After",mode:"drag",orientation:"horizontal",initialPosition:50,zoom:!1,zoomMax:4,zoomMin:1,theme:"light",handleStyle:"arrows",labelPosition:"top",animateOnce:!0,fullscreenButton:!0,lazyLoad:!0,zoomControls:!0,zoomControlsPosition:"bottom-right",scrollHint:!0,keyboardStep:1,keyboardLargeStep:10};function ie(i){const e=i.labels;let t=!0,o="Before",n="After";e===!1?t=!1:typeof e=="object"&&(o=e.before??"Before",n=e.after??"After");const s=i.animate;let r=!1,h=800,a=0,l="ease-out";s===!0?r=!0:typeof s=="object"&&(r=!0,h=Math.max(0,s.duration??800),a=Math.max(0,s.delay??0),l=s.easing??"ease-out");const c=i.zoom??u.zoom;return{beforeSrc:i.beforeSrc,afterSrc:i.afterSrc,beforeAlt:i.beforeAlt??u.beforeAlt,afterAlt:i.afterAlt??u.afterAlt,mode:C(i.mode,ve,u.mode,"mode"),orientation:C(i.orientation,ye,u.orientation,"orientation"),initialPosition:Ae(i.initialPosition??u.initialPosition),zoom:c,zoomMax:Math.max(1,i.zoomMax??u.zoomMax),zoomMin:Math.max(1,Math.min(i.zoomMin??u.zoomMin,i.zoomMax??u.zoomMax)),theme:C(i.theme,we,u.theme,"theme"),handleStyle:C(i.handleStyle,ze,u.handleStyle,"handleStyle"),labelsEnabled:t,labelBefore:o,labelAfter:n,labelPosition:C(i.labelPosition,Pe,u.labelPosition,"labelPosition"),animateEnabled:r,animateDuration:h,animateDelay:a,animateEasing:l,animateOnce:i.animateOnce??u.animateOnce,fullscreenButton:i.fullscreenButton??u.fullscreenButton,lazyLoad:i.lazyLoad??u.lazyLoad,zoomControls:i.zoomControls??(c?u.zoomControls:!1),zoomControlsPosition:C(i.zoomControlsPosition,Ce,u.zoomControlsPosition,"zoomControlsPosition"),scrollHint:i.scrollHint??(c?u.scrollHint:!1),keyboardStep:Math.max(.5,i.keyboardStep??u.keyboardStep),keyboardLargeStep:Math.max(1,i.keyboardLargeStep??u.keyboardLargeStep),onSlide:i.onSlide,onZoom:i.onZoom,onFullscreenChange:i.onFullscreenChange,onReady:i.onReady,cloudimage:i.cloudimage}}function P(i,e,t){if(e.includes(i))return i;console.warn(`CIBeforeAfter: Invalid ${t} "${i}". Allowed: ${e.join(", ")}`)}function C(i,e,t,o){return i===void 0?t:e.includes(i)?i:(console.warn(`CIBeforeAfter: Invalid ${o} "${i}". Allowed: ${e.join(", ")}. Using default "${t}".`),t)}function ke(i){const e=I=>i.getAttribute(`data-ci-before-after-${I}`),t=I=>{const M=e(I);if(M!==null)return M==="true"},o=I=>{const M=e(I);if(M===null)return;const te=parseFloat(M);return isNaN(te)?void 0:te},n=e("before-src"),s=e("after-src");if(!n||!s)throw new Error("CIBeforeAfter: data-ci-before-after-before-src and data-ci-before-after-after-src are required");const r={beforeSrc:n,afterSrc:s},h=e("before-alt");h!==null&&(r.beforeAlt=h);const a=e("after-alt");a!==null&&(r.afterAlt=a);const l=e("mode");l&&(r.mode=P(l,ve,"mode"));const c=e("orientation");c&&(r.orientation=P(c,ye,"orientation"));const f=o("initial-position");f!==void 0&&(r.initialPosition=f);const d=t("zoom");d!==void 0&&(r.zoom=d);const b=o("zoom-max");b!==void 0&&(r.zoomMax=b);const v=o("zoom-min");v!==void 0&&(r.zoomMin=v);const g=e("theme");g&&(r.theme=P(g,we,"theme"));const k=e("handle-style");k&&(r.handleStyle=P(k,ze,"handleStyle"));const A=t("labels"),S=e("label-before"),Y=e("label-after");A===!1?r.labels=!1:S!==null||Y!==null?r.labels={before:S??void 0,after:Y??void 0}:A===!0&&(r.labels=!0);const X=e("label-position");X&&(r.labelPosition=P(X,Pe,"labelPosition"));const N=t("animate"),W=o("animate-duration"),j=o("animate-delay"),H=e("animate-easing");W!==void 0||j!==void 0||H!=null?r.animate={duration:W,delay:j,easing:H??void 0}:N!==void 0&&(r.animate=N);const _=t("animate-once");_!==void 0&&(r.animateOnce=_);const q=t("fullscreen-button");q!==void 0&&(r.fullscreenButton=q);const G=t("lazy-load");G!==void 0&&(r.lazyLoad=G);const V=t("zoom-controls");V!==void 0&&(r.zoomControls=V);const U=e("zoom-controls-position");U&&(r.zoomControlsPosition=P(U,Ce,"zoomControlsPosition"));const K=t("scroll-hint");K!==void 0&&(r.scrollHint=K);const J=o("keyboard-step");J!==void 0&&(r.keyboardStep=J);const Q=o("keyboard-large-step");Q!==void 0&&(r.keyboardLargeStep=Q);const ee=e("ci-token");return ee&&(r.cloudimage={token:ee,apiVersion:e("ci-api-version")??void 0,domain:e("ci-domain")??void 0,limitFactor:o("ci-limit-factor"),params:e("ci-params")??void 0}),r}function Ae(i){return isFinite(i)?Math.max(0,Math.min(100,i)):50}function m(i,e,t){const o=document.createElement(i);if(e&&(o.className=e),t)for(const[n,s]of Object.entries(t))o.setAttribute(n,s);return o}function Se(i){if(typeof i=="string"){const e=document.querySelector(i);if(!e)throw new Error(`CIBeforeAfter: Element not found for selector "${i}"`);return e}return i}function Le(){return typeof window<"u"&&typeof document<"u"}function R(){if(!Le())return!1;const i=document;return!!(i.fullscreenEnabled||i.webkitFullscreenEnabled)}function Ie(i){const e=i;return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():Promise.reject(new Error("Fullscreen API not supported"))}function oe(){const i=document;return i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen?i.webkitExitFullscreen():Promise.reject(new Error("Fullscreen API not supported"))}function ne(){const i=document;return i.fullscreenElement||i.webkitFullscreenElement||null}class z{constructor(){this.cleanups=[]}on(e,t,o,n){e.addEventListener(t,o,n),this.cleanups.push(()=>e.removeEventListener(t,o,n))}onPassive(e,t,o){this.on(e,t,o,{passive:!0})}onNonPassive(e,t,o){this.on(e,t,o,{passive:!1})}destroy(){for(const e of this.cleanups)e();this.cleanups=[]}}function Me(i,e){var n;let t,o;if("touches"in i){const s=i.touches[0]||((n=i.changedTouches)==null?void 0:n[0]);if(!s)return{x:0,y:0};t=s.clientX,o=s.clientY}else t=i.clientX,o=i.clientY;return{x:t-e.left,y:o-e.top}}function D(i,e,t){const{x:o,y:n}=Me(i,e),s=t==="horizontal"?e.width:e.height;return s===0?50:Math.max(0,Math.min(100,(t==="horizontal"?o:n)/s*100))}const Te=/^[a-zA-Z0-9_-]+$/,Be=/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,xe=/^v\d+$/;function Oe(i){if(!Te.test(i.token))throw new Error(`CIBeforeAfter: Invalid cloudimage token "${i.token}". Must match [a-zA-Z0-9_-]+`);if(i.domain&&!Be.test(i.domain))throw new Error(`CIBeforeAfter: Invalid cloudimage domain "${i.domain}".`);if(i.apiVersion&&!xe.test(i.apiVersion))throw new Error(`CIBeforeAfter: Invalid cloudimage apiVersion "${i.apiVersion}". Must be "v" followed by digits.`)}function $e(i,e,t){Oe(t);const{token:o,apiVersion:n="v7",domain:s="cloudimg.io",limitFactor:r=100,params:h="",devicePixelRatioList:a=[1,1.5,2]}=t,l=typeof window<"u"&&window.devicePixelRatio||1,f=(a.length>0?a:[1]).reduce((A,S)=>Math.abs(S-l)<Math.abs(A-l)?S:A),d=r>0?r:100,b=e*f,v=Math.ceil(b/d)*d,g=`https://${o}.${s}/${n}`,k=h?`?${h}&w=${v}`:`?w=${v}`;return i.startsWith("http://")||i.startsWith("https://")?`${g}/${i}${k}`:`${g}/${i}${k}`}function F(i,e,t,o){let n=e;o&&o.level>1&&(t==="horizontal"?n=e/o.level-o.panX*100/(o.level*o.containerWidth):n=e/o.level-o.panY*100/(o.level*o.containerHeight),n=Math.max(0,Math.min(100,n)));const s=t==="horizontal"?`inset(0 0 0 ${n}%)`:`inset(${n}% 0 0 0)`;i.style.clipPath=s,i.style.setProperty("-webkit-clip-path",s)}function De(i,e,t){t==="horizontal"?(i.style.left=`${e}%`,i.style.top=""):(i.style.top=`${e}%`,i.style.left="")}function se(i){return isFinite(i)?Math.max(0,Math.min(100,i)):50}const Ze='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>',He='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>',Re='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>',Fe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>',Ye='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 8 22 12 18 16"/><polyline points="6 8 2 12 6 16"/><line x1="2" x2="22" y1="12" y2="12"/></svg>',Xe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="8 18 12 22 16 18"/><polyline points="8 6 12 2 16 6"/><line x1="12" x2="12" y1="2" y2="22"/></svg>';function re(i,e,t){const o=m("div",`ci-before-after-handle ci-before-after-handle--${i}`,{role:"slider","aria-valuenow":String(Math.round(t)),"aria-valuemin":"0","aria-valuemax":"100","aria-label":"Image comparison slider. Use arrow keys to adjust the before and after split position.","aria-orientation":e,tabindex:"0"});switch(e==="horizontal"?o.style.left=`${t}%`:o.style.top=`${t}%`,i){case"arrows":Ne(o,e);break;case"circle":We(o,e);break;case"line":je(o);break}return o}function Ne(i,e){const t=m("div","ci-before-after-handle-line"),o=m("div","ci-before-after-handle-grip"),n=m("div","ci-before-after-handle-line");e==="horizontal"?o.innerHTML=Ze+He:o.innerHTML=Re+Fe,i.append(t,o,n)}function We(i,e){const t=m("div","ci-before-after-handle-grip");e==="horizontal"?t.innerHTML=Ye:t.innerHTML=Xe,i.append(t)}function je(i){const e=m("div","ci-before-after-handle-line"),t=m("div","ci-before-after-handle-grip ci-before-after-handle-grip--pill"),o=m("div","ci-before-after-handle-line");i.append(e,t,o)}class ae{constructor(e,t,o,n,s){this.container=e,this.handle=t,this.mode=o,this.orientation=n,this.callbacks=s,this.events=new z,this.containerRect=null,this.rafId=null,this.pendingPosition=null,this.abortController=null,this.bind()}bind(){switch(this.mode){case"drag":this.bindDrag();break;case"hover":this.bindHover();break;case"click":this.bindClick();break}}bindDrag(){this.events.on(this.handle,"mousedown",e=>{e.preventDefault(),this.startDrag()}),this.events.on(this.handle,"touchstart",e=>{e.preventDefault(),this.handle.focus(),this.startTouchDrag()},{passive:!1})}startDrag(){this.cleanupWindowListeners(),this.abortController=new AbortController;const e=this.abortController.signal;this.containerRect=this.container.getBoundingClientRect(),this.callbacks.onDragStart();const t=n=>{if(!this.containerRect)return;const s=D(n,this.containerRect,this.orientation);this.schedulePositionUpdate(s)},o=()=>{this.flushPositionUpdate(),this.callbacks.onDragEnd(),this.containerRect=null,this.cleanupWindowListeners()};window.addEventListener("mousemove",t,{signal:e}),window.addEventListener("mouseup",o,{signal:e})}startTouchDrag(){this.cleanupWindowListeners(),this.abortController=new AbortController;const e=this.abortController.signal;this.containerRect=this.container.getBoundingClientRect(),this.callbacks.onDragStart();const t=n=>{if(!this.containerRect||n.touches.length!==1)return;n.preventDefault();const s=D(n,this.containerRect,this.orientation);this.schedulePositionUpdate(s)},o=()=>{this.flushPositionUpdate(),this.callbacks.onDragEnd(),this.containerRect=null,this.cleanupWindowListeners()};window.addEventListener("touchmove",t,{passive:!1,signal:e}),window.addEventListener("touchend",o,{signal:e}),window.addEventListener("touchcancel",o,{signal:e})}schedulePositionUpdate(e){this.pendingPosition=e,this.rafId===null&&(this.rafId=requestAnimationFrame(()=>{this.rafId=null,this.pendingPosition!==null&&(this.callbacks.onPositionChange(this.pendingPosition),this.pendingPosition=null)}))}flushPositionUpdate(){this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.pendingPosition!==null&&(this.callbacks.onPositionChange(this.pendingPosition),this.pendingPosition=null)}cleanupWindowListeners(){this.abortController&&(this.abortController.abort(),this.abortController=null)}bindHover(){this.events.on(this.container,"mousemove",e=>{const t=this.container.getBoundingClientRect(),o=D(e,t,this.orientation);this.schedulePositionUpdate(o)})}bindClick(){this.events.on(this.container,"click",e=>{if(this.handle.contains(e.target))return;const t=this.container.getBoundingClientRect(),o=D(e,t,this.orientation);this.callbacks.onPositionChange(o)})}updateMode(e){this.events.destroy(),this.cleanupWindowListeners(),this.flushPositionUpdate(),this.mode=e,this.bind()}updateOrientation(e){this.orientation=e}destroy(){this.cleanupWindowListeners(),this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.pendingPosition=null,this.events.destroy(),this.containerRect=null}}class _e{constructor(e,t,o,n,s){this.viewport=e,this.container=t,this.config=o,this.onZoomChange=n,this.zoomLevel=1,this.panX=0,this.panY=0,this.containerWidth=0,this.containerHeight=0,this.transitioning=!1,this.transitionEndCleanup=null,this.resizeObserver=null,this.onTransformChange=s,this.updateContainerSize(),this.observeResize()}observeResize(){typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(e=>{for(const t of e){const{width:o,height:n}=t.contentRect;this.containerWidth=o,this.containerHeight=n}}),this.resizeObserver.observe(this.container))}getZoom(){return this.zoomLevel}getContainerSize(){return{width:this.containerWidth,height:this.containerHeight}}setZoom(e,t,o){var r;const n=Math.max(this.config.zoomMin,Math.min(this.config.zoomMax,e));if(n===this.zoomLevel)return;const s=this.zoomLevel;this.zoomLevel=n,t!==void 0&&o!==void 0&&(this.panX=t-(t-this.panX)*(n/s),this.panY=o-(o-this.panY)*(n/s)),this.clampPan(),this.applyTransform(!0),(r=this.onZoomChange)==null||r.call(this,this.zoomLevel)}zoomIn(){this.setZoom(this.zoomLevel*1.5,this.containerWidth/2,this.containerHeight/2)}zoomOut(){this.setZoom(this.zoomLevel/1.5,this.containerWidth/2,this.containerHeight/2)}resetZoom(){var e;this.zoomLevel=Math.max(1,this.config.zoomMin),this.panX=0,this.panY=0,this.applyTransform(!0),(e=this.onZoomChange)==null||e.call(this,this.zoomLevel)}getPan(){return{x:this.panX,y:this.panY}}setPan(e,t){this.panX=e,this.panY=t,this.clampPan(),this.applyTransform(!1)}pan(e,t){this.zoomLevel<=1||(this.panX+=e,this.panY+=t,this.clampPan(),this.applyTransform(!1))}handleWheel(e){if(!e.ctrlKey&&!e.metaKey)return;e.preventDefault();const t=this.container.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top,s=e.deltaY>0?.9:1.1;this.setZoom(this.zoomLevel*s,o,n)}toggleZoom(e,t){const o=Math.max(1,this.config.zoomMin);this.zoomLevel>o?this.resetZoom():this.setZoom(Math.max(2,o*1.5),e,t)}updateConfig(e){var o;this.config=e;const t=Math.max(e.zoomMin,Math.min(e.zoomMax,this.zoomLevel));t!==this.zoomLevel&&(this.zoomLevel=t,(o=this.onZoomChange)==null||o.call(this,this.zoomLevel)),this.clampPan(),this.applyTransform(!1)}updateContainerSize(){const e=this.container.getBoundingClientRect();this.containerWidth=e.width,this.containerHeight=e.height}clampPan(){if(this.zoomLevel<=1){this.panX=0,this.panY=0;return}const e=this.containerWidth*(this.zoomLevel-1),t=this.containerHeight*(this.zoomLevel-1);this.panX=Math.max(-e,Math.min(0,this.panX)),this.panY=Math.max(-t,Math.min(0,this.panY))}applyTransform(e){var t;if(this.transitionEndCleanup&&(this.transitionEndCleanup(),this.transitionEndCleanup=null),e){this.viewport.style.transition="transform 300ms ease",this.transitioning=!0;const o=n=>{n.target===this.viewport&&(this.viewport.style.transition="",this.transitioning=!1,this.transitionEndCleanup=null,this.viewport.removeEventListener("transitionend",o))};this.viewport.addEventListener("transitionend",o),this.transitionEndCleanup=()=>{this.viewport.removeEventListener("transitionend",o),this.viewport.style.transition="",this.transitioning=!1}}else this.transitioning||(this.viewport.style.transition="");this.viewport.style.transform=`scale(${this.zoomLevel}) translate(${this.panX/this.zoomLevel}px, ${this.panY/this.zoomLevel}px)`,(t=this.onTransformChange)==null||t.call(this)}destroy(){var e;this.transitionEndCleanup&&(this.transitionEndCleanup(),this.transitionEndCleanup=null),this.viewport.style.transform="",this.viewport.style.transition="",(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=null}}const qe=3;class le{constructor(e,t,o,n){this.container=e,this.handle=t,this.zoomPan=o,this.scrollHintCallback=n,this.events=new z,this.isPanning=!1,this.lastPanX=0,this.lastPanY=0,this.initialPinchDistance=0,this.initialPinchZoom=1,this.abortController=null,this.bind()}bind(){this.events.onNonPassive(this.container,"wheel",e=>{var t;e.ctrlKey||e.metaKey?this.zoomPan.handleWheel(e):this.zoomPan.getZoom()>1||(t=this.scrollHintCallback)==null||t.call(this)}),this.events.on(this.container,"dblclick",e=>{if(this.handle.contains(e.target))return;const t=this.container.getBoundingClientRect();this.zoomPan.toggleZoom(e.clientX-t.left,e.clientY-t.top)}),this.events.on(this.container,"mousedown",e=>{this.handle.contains(e.target)||this.zoomPan.getZoom()<=1||(e.preventDefault(),this.startPan(e.clientX,e.clientY))}),this.events.on(this.container,"touchstart",e=>{this.handle.contains(e.target)||(e.touches.length===2?(e.preventDefault(),this.startPinch(e)):e.touches.length===1&&this.zoomPan.getZoom()>1&&(e.preventDefault(),this.startTouchPan(e)))},{passive:!1}),typeof window<"u"&&"GestureEvent"in window&&(this.events.onNonPassive(this.container,"gesturestart",e=>{e.preventDefault(),this.initialPinchZoom=this.zoomPan.getZoom();const t=e,o=this.container.getBoundingClientRect();t.clientX-o.left,t.clientY-o.top}),this.events.onNonPassive(this.container,"gesturechange",e=>{e.preventDefault();const t=e,o=this.container.getBoundingClientRect();this.zoomPan.setZoom(this.initialPinchZoom*t.scale,t.clientX-o.left,t.clientY-o.top)}))}startPan(e,t){this.cleanupWindowListeners(),this.abortController=new AbortController;const o=this.abortController.signal;this.isPanning=!1,this.lastPanX=e,this.lastPanY=t;const n=e,s=t,r=a=>{const l=a.clientX-this.lastPanX,c=a.clientY-this.lastPanY;if(!this.isPanning){const f=a.clientX-n,d=a.clientY-s;if(Math.hypot(f,d)<qe)return;this.isPanning=!0,this.container.style.cursor="grabbing"}this.lastPanX=a.clientX,this.lastPanY=a.clientY,this.zoomPan.pan(l,c)},h=()=>{this.isPanning=!1,this.container.style.cursor="",this.cleanupWindowListeners()};window.addEventListener("mousemove",r,{signal:o}),window.addEventListener("mouseup",h,{signal:o})}startTouchPan(e){this.cleanupWindowListeners(),this.abortController=new AbortController;const t=this.abortController.signal,o=e.touches[0];this.lastPanX=o.clientX,this.lastPanY=o.clientY;const n=r=>{if(r.touches.length!==1)return;r.preventDefault();const h=r.touches[0],a=h.clientX-this.lastPanX,l=h.clientY-this.lastPanY;this.lastPanX=h.clientX,this.lastPanY=h.clientY,this.zoomPan.pan(a,l)},s=()=>{this.cleanupWindowListeners()};window.addEventListener("touchmove",n,{passive:!1,signal:t}),window.addEventListener("touchend",s,{signal:t}),window.addEventListener("touchcancel",s,{signal:t})}startPinch(e){if(e.touches.length<2)return;this.cleanupWindowListeners(),this.abortController=new AbortController;const t=this.abortController.signal,[o,n]=[e.touches[0],e.touches[1]];this.initialPinchDistance=Math.hypot(n.clientX-o.clientX,n.clientY-o.clientY),this.initialPinchDistance===0&&(this.initialPinchDistance=1),this.initialPinchZoom=this.zoomPan.getZoom();const s=this.container.getBoundingClientRect(),r=(o.clientX+n.clientX)/2-s.left,h=(o.clientY+n.clientY)/2-s.top,a=c=>{if(c.touches.length!==2)return;c.preventDefault();const[f,d]=[c.touches[0],c.touches[1]],v=Math.hypot(d.clientX-f.clientX,d.clientY-f.clientY)/this.initialPinchDistance;this.zoomPan.setZoom(this.initialPinchZoom*v,r,h)},l=()=>{this.cleanupWindowListeners()};window.addEventListener("touchmove",a,{passive:!1,signal:t}),window.addEventListener("touchend",l,{signal:t}),window.addEventListener("touchcancel",l,{signal:t})}cleanupWindowListeners(){this.abortController&&(this.abortController.abort(),this.abortController=null)}destroy(){this.cleanupWindowListeners(),this.events.destroy()}}const Ge='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>',Ve='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/></svg>',Ue='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>';function ce(i,e){const t=new z,o=m("div",`ci-before-after-zoom-controls ci-before-after-zoom-controls--${i}`),n=m("button","ci-before-after-zoom-in",{type:"button","aria-label":"Zoom in"});n.innerHTML=Ge,t.on(n,"click",e.onZoomIn);const s=m("button","ci-before-after-zoom-out",{type:"button","aria-label":"Zoom out"});s.innerHTML=Ve,t.on(s,"click",e.onZoomOut);const r=m("button","ci-before-after-zoom-reset",{type:"button","aria-label":"Reset zoom"});return r.innerHTML=Ue,t.on(r,"click",e.onReset),o.append(n,s,r),{element:o,events:t}}class he{constructor(e){this.timeout=null,this.el=m("div","ci-before-after-scroll-hint",{"aria-hidden":"true"});const t=typeof navigator<"u"&&/Mac|iPhone|iPad|iPod/.test(navigator.userAgent);this.el.textContent=t?"âŒ˜ + scroll or pinch to zoom":"Ctrl + scroll or pinch to zoom",e.appendChild(this.el)}show(){this.timeout&&clearTimeout(this.timeout),this.el.classList.add("ci-before-after-scroll-hint--visible"),this.timeout=setTimeout(()=>{this.el.classList.remove("ci-before-after-scroll-hint--visible"),this.timeout=null},1500)}destroy(){this.timeout&&clearTimeout(this.timeout),this.el.remove()}}function fe(i,e,t,o){const n=`ci-before-after-label--${t}`,s=m("div",`ci-before-after-label ci-before-after-label-before ${n}`,{"aria-hidden":"true"});s.textContent=i;const r=m("div",`ci-before-after-label ci-before-after-label-after ${n}`,{"aria-hidden":"true"});return r.textContent=e,{before:s,after:r}}function de(i,e,t,o){if(!i||!e)return;const n=15;t<n?i.classList.add("ci-before-after-label--hidden"):i.classList.remove("ci-before-after-label--hidden"),t>100-n?e.classList.add("ci-before-after-label--hidden"):e.classList.remove("ci-before-after-label--hidden")}const me='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/></svg>',Ke='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/></svg>';class ue{constructor(e,t){this.container=e,this.onFullscreenChange=t,this.button=null,this.events=new z,this.isActive=!1,R()&&(this.createButton(),this.bindEvents())}createButton(){this.button=m("button","ci-before-after-fullscreen-btn",{type:"button","aria-label":"Enter fullscreen","aria-pressed":"false"}),this.button.innerHTML=me,this.events.on(this.button,"click",()=>{this.toggle().catch(()=>{})}),this.container.appendChild(this.button)}bindEvents(){this.events.on(document,"fullscreenchange",()=>this.handleChange()),this.events.on(document,"webkitfullscreenchange",()=>this.handleChange())}handleChange(){var o;const e=ne(),t=this.isActive;this.isActive=e===this.container,t!==this.isActive&&(this.container.classList.toggle("ci-before-after-container--fullscreen",this.isActive),this.button&&(this.button.innerHTML=this.isActive?Ke:me,this.button.setAttribute("aria-label",this.isActive?"Exit fullscreen":"Enter fullscreen"),this.button.setAttribute("aria-pressed",String(this.isActive))),(o=this.onFullscreenChange)==null||o.call(this,this.isActive))}async enter(){R()&&await Ie(this.container)}async exit(){R()&&ne()===this.container&&await oe()}async toggle(){this.isActive?await this.exit():await this.enter()}getIsFullscreen(){return this.isActive}destroy(){var t,o;const e=this.isActive;this.events.destroy(),e&&(this.isActive=!1,(t=this.onFullscreenChange)==null||t.call(this,!1),oe().catch(()=>{})),this.container.classList.remove("ci-before-after-container--fullscreen"),(o=this.button)==null||o.remove()}}class Je{constructor(e,t,o,n,s,r){this.container=e,this.duration=t,this.delay=o,this.easing=n,this.animateOnce=s,this.onAnimate=r,this.observer=null,this.hasPlayed=!1,this.isAnimating=!1,this.delayTimer=null,this.durationTimer=null,this.observe()}observe(){typeof IntersectionObserver>"u"||(this.observer=new IntersectionObserver(e=>{for(const t of e)if(t.isIntersecting){if(this.animateOnce&&this.hasPlayed||this.isAnimating)continue;this.play()}},{threshold:.3}),this.observer.observe(this.container))}play(){var e,t;if(this.hasPlayed=!0,this.isAnimating=!0,typeof window<"u"&&((e=window.matchMedia)!=null&&e.call(window,"(prefers-reduced-motion: reduce)").matches)){this.onAnimate(!0),this.isAnimating=!1,this.animateOnce&&((t=this.observer)==null||t.disconnect());return}this.container.classList.add("ci-before-after-animate-entrance"),this.container.style.setProperty("--ci-before-after-animate-duration",`${this.duration}ms`),this.container.style.setProperty("--ci-before-after-animate-easing",this.easing),this.delayTimer=setTimeout(()=>{this.delayTimer=null,this.onAnimate(!1),this.durationTimer=setTimeout(()=>{var o;this.durationTimer=null,this.container.classList.remove("ci-before-after-animate-entrance"),this.isAnimating=!1,this.animateOnce&&((o=this.observer)==null||o.disconnect())},this.duration)},this.delay)}getHasPlayed(){return this.hasPlayed}destroy(){var e;this.delayTimer&&clearTimeout(this.delayTimer),this.durationTimer&&clearTimeout(this.durationTimer),this.delayTimer=null,this.durationTimer=null,this.isAnimating=!1,this.container.classList.remove("ci-before-after-animate-entrance"),this.container.style.removeProperty("--ci-before-after-animate-duration"),this.container.style.removeProperty("--ci-before-after-animate-easing"),(e=this.observer)==null||e.disconnect(),this.observer=null}}class ge{constructor(e,t,o,n,s,r){this.handle=e,this.orientation=t,this.step=o,this.largeStep=n,this.zoomEnabled=s,this.callbacks=r,this.events=new z,this.bind()}bind(){this.events.on(this.handle,"keydown",e=>{this.handleKeyDown(e)})}handleKeyDown(e){var s,r,h,a,l,c;if(e.ctrlKey||e.altKey||e.metaKey)return;const t=this.callbacks.getPosition(),o=e.shiftKey?this.largeStep:this.step;let n=null;if(this.orientation==="horizontal")switch(e.key){case"ArrowLeft":n=t-o;break;case"ArrowRight":n=t+o;break}else switch(e.key){case"ArrowUp":n=t-o;break;case"ArrowDown":n=t+o;break}switch(e.key){case"Home":n=0;break;case"End":n=100;break}if(n!==null){e.preventDefault(),n=Math.max(0,Math.min(100,n)),this.callbacks.onPositionChange(n);return}if(this.zoomEnabled)switch(e.key){case"+":case"=":e.preventDefault(),(r=(s=this.callbacks).onZoomIn)==null||r.call(s);break;case"-":e.preventDefault(),(a=(h=this.callbacks).onZoomOut)==null||a.call(h);break;case"0":e.preventDefault(),(c=(l=this.callbacks).onZoomReset)==null||c.call(l);break}}updateConfig(e,t,o,n){this.orientation=e,this.step=t,this.largeStep=o,this.zoomEnabled=n}destroy(){this.events.destroy()}}function Qe(i,e){i.setAttribute("aria-valuenow",String(Math.round(e)))}function et(i){i.setAttribute("role","group"),i.setAttribute("aria-label","Before and after image comparison")}class tt{constructor(e,t){this.events=new z,this.imageEvents=new z,this.sliderGestures=null,this.zoomPan=null,this.zoomGestures=null,this.scrollHint=null,this.fullscreenManager=null,this.entranceAnimation=null,this.keyboardHandler=null,this.resizeObserver=null,this.zoomControlsEl=null,this.zoomControlsEvents=null,this.lazyLoadObserver=null,this.resizeDebounceTimer=null,this.animTransitionTimer=null,this.suppressCallbacks=!1;const o=Se(e);this.userConfig={...t},this.config=ie(t),this.state={position:this.config.initialPosition,isDragging:!1,zoomLevel:1,panX:0,panY:0,isReady:!1,isFullscreen:!1},this.buildDOM(o),this.initModules(),this.loadImages()}getElements(){return{container:this.elements.container,viewport:this.elements.viewport,beforeImage:this.elements.beforeImage,afterImage:this.elements.afterImage,handle:this.elements.handle}}setPosition(e){const t=se(e);this.updatePosition(t)}getPosition(){return this.state.position}setZoom(e){var t;(t=this.zoomPan)==null||t.setZoom(e)}getZoom(){var e;return((e=this.zoomPan)==null?void 0:e.getZoom())??1}resetZoom(){var e;(e=this.zoomPan)==null||e.resetZoom()}enterFullscreen(){var e;(e=this.fullscreenManager)==null||e.enter().catch(()=>{})}exitFullscreen(){var e;(e=this.fullscreenManager)==null||e.exit().catch(()=>{})}isFullscreen(){var e;return((e=this.fullscreenManager)==null?void 0:e.getIsFullscreen())??!1}update(e){var r,h,a,l,c,f,d,b;this.userConfig={...this.userConfig,...e};const t=this.config;this.config=ie(this.userConfig);const o=this.config.beforeSrc!==t.beforeSrc,n=this.config.afterSrc!==t.afterSrc,s=!it(this.config.cloudimage,t.cloudimage);if((o||n||s)&&(this.lazyLoadObserver&&(this.lazyLoadObserver.disconnect(),this.lazyLoadObserver=null),this.state.isReady=!1,this.elements.container.classList.add("ci-before-after-loading"),(o||s)&&(this.elements.beforeImage.src=this.resolveImageSrc(this.config.beforeSrc)),(n||s)&&(this.elements.afterImage.src=this.resolveImageSrc(this.config.afterSrc)),this.registerImageLoadHandlers(o||s,n||s),this.config.cloudimage&&!t.cloudimage?this.initResizeObserver():!this.config.cloudimage&&t.cloudimage&&((r=this.resizeObserver)==null||r.disconnect(),this.resizeObserver=null)),this.config.beforeAlt!==t.beforeAlt&&this.elements.beforeImage.setAttribute("alt",this.config.beforeAlt),this.config.afterAlt!==t.afterAlt&&this.elements.afterImage.setAttribute("alt",this.config.afterAlt),this.elements.container.classList.toggle("ci-before-after-theme-dark",this.config.theme==="dark"),this.elements.container.classList.toggle("ci-before-after-container--horizontal",this.config.orientation==="horizontal"),this.elements.container.classList.toggle("ci-before-after-container--vertical",this.config.orientation==="vertical"),this.elements.container.classList.toggle("ci-before-after-container--hover-mode",this.config.mode==="hover"),this.elements.container.classList.toggle("ci-before-after-container--click-mode",this.config.mode==="click"),this.elements.viewport.classList.toggle("ci-before-after-viewport--zoomable",this.config.zoom),(this.config.handleStyle!==t.handleStyle||this.config.orientation!==t.orientation)&&this.rebuildHandle(),this.config.mode!==t.mode&&((h=this.sliderGestures)==null||h.updateMode(this.config.mode)),this.config.orientation!==t.orientation&&((a=this.sliderGestures)==null||a.updateOrientation(this.config.orientation)),(this.config.labelsEnabled!==t.labelsEnabled||this.config.labelBefore!==t.labelBefore||this.config.labelAfter!==t.labelAfter||this.config.labelPosition!==t.labelPosition||this.config.orientation!==t.orientation)&&this.rebuildLabels(),this.config.zoom!==t.zoom)this.rebuildZoom();else if(this.zoomPan&&(this.zoomPan.updateConfig(this.config),this.config.scrollHint!==t.scrollHint&&((l=this.scrollHint)==null||l.destroy(),this.scrollHint=null,this.config.scrollHint&&(this.scrollHint=new he(this.elements.container))),(this.config.zoomControls!==t.zoomControls||this.config.zoomControlsPosition!==t.zoomControlsPosition)&&((c=this.zoomControlsEvents)==null||c.destroy(),this.zoomControlsEvents=null,(f=this.zoomControlsEl)==null||f.remove(),this.zoomControlsEl=null,this.elements.container.classList.remove("ci-before-after-container--zoom-top-right"),this.elements.container.classList.remove("ci-before-after-container--zoom-top"),this.elements.container.classList.remove("ci-before-after-container--zoom-left"),this.config.zoomControls))){const v=ce(this.config.zoomControlsPosition,{onZoomIn:()=>{var g;return(g=this.zoomPan)==null?void 0:g.zoomIn()},onZoomOut:()=>{var g;return(g=this.zoomPan)==null?void 0:g.zoomOut()},onReset:()=>{var g;return(g=this.zoomPan)==null?void 0:g.resetZoom()}});this.zoomControlsEl=v.element,this.zoomControlsEvents=v.events,this.elements.container.appendChild(this.zoomControlsEl),this.applyZoomPositionClasses()}this.config.initialPosition!==t.initialPosition&&this.updatePosition(this.config.initialPosition),this.config.fullscreenButton!==t.fullscreenButton&&this.rebuildFullscreen(),this.config.animateEnabled!==t.animateEnabled&&((d=this.entranceAnimation)==null||d.destroy(),this.entranceAnimation=null,this.config.animateEnabled&&this.initEntranceAnimation()),(b=this.keyboardHandler)==null||b.updateConfig(this.config.orientation,this.config.keyboardStep,this.config.keyboardLargeStep,this.config.zoom),this.updatePosition(this.state.position)}destroy(){var e,t,o,n,s,r,h,a,l,c,f;(e=this.sliderGestures)==null||e.destroy(),(t=this.zoomGestures)==null||t.destroy(),(o=this.zoomPan)==null||o.destroy(),this.zoomPan=null,(n=this.scrollHint)==null||n.destroy(),(s=this.fullscreenManager)==null||s.destroy(),(r=this.entranceAnimation)==null||r.destroy(),(h=this.keyboardHandler)==null||h.destroy(),this.events.destroy(),this.imageEvents.destroy(),(a=this.resizeObserver)==null||a.disconnect(),(l=this.lazyLoadObserver)==null||l.disconnect(),this.lazyLoadObserver=null,(c=this.zoomControlsEvents)==null||c.destroy(),this.zoomControlsEvents=null,(f=this.zoomControlsEl)==null||f.remove(),this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.animTransitionTimer&&clearTimeout(this.animTransitionTimer),this.elements.container.innerHTML="",this.elements.container.removeAttribute("role"),this.elements.container.removeAttribute("aria-label"),this.elements.container.className=this.elements.container.className.split(" ").filter(d=>!d.startsWith("ci-before-after")).join(" ")}buildDOM(e){e.innerHTML="";const t=`ci-before-after-container--${this.config.orientation}`;e.classList.add("ci-before-after-container",t),this.config.mode==="hover"&&e.classList.add("ci-before-after-container--hover-mode"),this.config.mode==="click"&&e.classList.add("ci-before-after-container--click-mode"),this.config.theme==="dark"&&e.classList.add("ci-before-after-theme-dark"),e.classList.add("ci-before-after-loading"),et(e);const o=m("div","ci-before-after-viewport");this.config.zoom&&o.classList.add("ci-before-after-viewport--zoomable");const n=m("div","ci-before-after-wrapper"),s=m("img","ci-before-after-image ci-before-after-before",{alt:this.config.beforeAlt,draggable:"false",role:"img"}),r=m("div","ci-before-after-clip");F(r,this.state.position,this.config.orientation);const h=m("img","ci-before-after-image ci-before-after-after",{alt:this.config.afterAlt,draggable:"false",role:"img"});r.appendChild(h),n.append(s,r),o.appendChild(n),e.appendChild(o);const a=re(this.config.handleStyle,this.config.orientation,this.state.position);e.appendChild(a);const l=a.querySelector(".ci-before-after-handle-grip");let c=null,f=null;if(this.config.labelsEnabled){const d=fe(this.config.labelBefore,this.config.labelAfter,this.config.labelPosition,this.config.orientation);c=d.before,f=d.after,e.append(c,f)}this.elements={container:e,viewport:o,wrapper:n,beforeImage:s,afterImage:h,clip:r,handle:a,handleGrip:l,labelBefore:c,labelAfter:f}}initModules(){this.sliderGestures=new ae(this.elements.container,this.elements.handle,this.config.mode,this.config.orientation,{onPositionChange:e=>this.updatePosition(e),onDragStart:()=>this.onDragStart(),onDragEnd:()=>this.onDragEnd()}),this.keyboardHandler=new ge(this.elements.handle,this.config.orientation,this.config.keyboardStep,this.config.keyboardLargeStep,this.config.zoom,{onPositionChange:e=>this.updatePosition(e),getPosition:()=>this.state.position,onZoomIn:()=>{var e;return(e=this.zoomPan)==null?void 0:e.zoomIn()},onZoomOut:()=>{var e;return(e=this.zoomPan)==null?void 0:e.zoomOut()},onZoomReset:()=>{var e;return(e=this.zoomPan)==null?void 0:e.resetZoom()}}),this.config.zoom&&this.initZoom(),this.config.fullscreenButton&&(this.elements.container.classList.add("ci-before-after-container--has-fullscreen"),this.fullscreenManager=new ue(this.elements.container,e=>{this.state.isFullscreen=e,T(this.config.onFullscreenChange,e)})),this.config.animateEnabled&&this.initEntranceAnimation(),this.config.cloudimage&&this.initResizeObserver()}initZoom(){if(this.zoomPan=new _e(this.elements.viewport,this.elements.container,this.config,e=>{this.state.zoomLevel=e,this.syncClip(),T(this.config.onZoom,e)},()=>this.syncClip()),this.config.scrollHint&&(this.scrollHint=new he(this.elements.container)),this.zoomGestures=new le(this.elements.container,this.elements.handle,this.zoomPan,()=>{var e;return(e=this.scrollHint)==null?void 0:e.show()}),this.config.zoomControls){const e=ce(this.config.zoomControlsPosition,{onZoomIn:()=>{var t;return(t=this.zoomPan)==null?void 0:t.zoomIn()},onZoomOut:()=>{var t;return(t=this.zoomPan)==null?void 0:t.zoomOut()},onReset:()=>{var t;return(t=this.zoomPan)==null?void 0:t.resetZoom()}});this.zoomControlsEl=e.element,this.zoomControlsEvents=e.events,this.elements.container.appendChild(this.zoomControlsEl),this.applyZoomPositionClasses()}}applyZoomPositionClasses(){const e=this.config.zoomControlsPosition;this.elements.container.classList.toggle("ci-before-after-container--zoom-top-right",e==="top-right"),this.elements.container.classList.toggle("ci-before-after-container--zoom-top",e.startsWith("top-")),this.elements.container.classList.toggle("ci-before-after-container--zoom-left",e.endsWith("-left"))}initEntranceAnimation(){this.animTransitionTimer&&(clearTimeout(this.animTransitionTimer),this.animTransitionTimer=null,this.elements.handle.style.transition="",this.elements.clip.style.transition="");const e=0;this.suppressCallbacks=!0,this.updatePosition(e),this.suppressCallbacks=!1,this.entranceAnimation=new Je(this.elements.container,this.config.animateDuration,this.config.animateDelay,this.config.animateEasing,this.config.animateOnce,t=>{t||(this.elements.handle.style.transition=`left ${this.config.animateDuration}ms ${this.config.animateEasing}, top ${this.config.animateDuration}ms ${this.config.animateEasing}`,this.elements.clip.style.transition=`clip-path ${this.config.animateDuration}ms ${this.config.animateEasing}`),this.updatePosition(this.config.initialPosition),t||(this.animTransitionTimer=setTimeout(()=>{this.animTransitionTimer=null,this.elements.handle.style.transition="",this.elements.clip.style.transition=""},this.config.animateDuration))})}loadImages(){const e=this.resolveImageSrc(this.config.beforeSrc),t=this.resolveImageSrc(this.config.afterSrc);this.config.lazyLoad&&typeof IntersectionObserver<"u"?(this.lazyLoadObserver=new IntersectionObserver(o=>{var n;for(const s of o)s.isIntersecting&&(this.elements.beforeImage.src=e,this.elements.afterImage.src=t,(n=this.lazyLoadObserver)==null||n.disconnect(),this.lazyLoadObserver=null)},{threshold:0}),this.lazyLoadObserver.observe(this.elements.container)):(this.elements.beforeImage.src=e,this.elements.afterImage.src=t),this.registerImageLoadHandlers(!0,!0)}registerImageLoadHandlers(e,t){this.imageEvents.destroy();let o=!e,n=!t;const s=()=>{o&&n&&this.onImagesReady()},r=()=>{o||(o=!0,s())},h=()=>{n||(n=!0,s())},a=()=>{console.warn(`CIBeforeAfter: Failed to load image "${this.elements.beforeImage.src}"`),o||(o=!0,s())},l=()=>{console.warn(`CIBeforeAfter: Failed to load image "${this.elements.afterImage.src}"`),n||(n=!0,s())};this.imageEvents.on(this.elements.beforeImage,"load",r),this.imageEvents.on(this.elements.afterImage,"load",h),this.imageEvents.on(this.elements.beforeImage,"error",a),this.imageEvents.on(this.elements.afterImage,"error",l),this.elements.beforeImage.complete&&this.elements.beforeImage.src&&r(),this.elements.afterImage.complete&&this.elements.afterImage.src&&h()}onImagesReady(){if(this.state.isReady)return;this.state.isReady=!0;const{naturalWidth:e,naturalHeight:t}=this.elements.beforeImage;e&&t&&(this.elements.wrapper.style.aspectRatio=`${e} / ${t}`),this.elements.container.classList.remove("ci-before-after-loading"),T(this.config.onReady)}getClipZoomInfo(){if(!this.zoomPan||this.zoomPan.getZoom()<=1)return;const e=this.zoomPan.getPan(),t=this.zoomPan.getContainerSize();return{level:this.zoomPan.getZoom(),panX:e.x,panY:e.y,containerWidth:t.width,containerHeight:t.height}}syncClip(){F(this.elements.clip,this.state.position,this.config.orientation,this.getClipZoomInfo())}updatePosition(e){this.state.position=se(e),F(this.elements.clip,this.state.position,this.config.orientation,this.getClipZoomInfo()),De(this.elements.handle,this.state.position,this.config.orientation),Qe(this.elements.handle,this.state.position),de(this.elements.labelBefore,this.elements.labelAfter,this.state.position,this.config.orientation),this.suppressCallbacks||T(this.config.onSlide,this.state.position)}onDragStart(){this.state.isDragging=!0,this.elements.container.classList.add("ci-before-after-container--dragging")}onDragEnd(){this.state.isDragging=!1,this.elements.container.classList.remove("ci-before-after-container--dragging")}resolveImageSrc(e){if(this.config.cloudimage){const t=this.elements.container.getBoundingClientRect().width||800;return $e(e,t,this.config.cloudimage)}return e}rebuildHandle(){var o,n;const e=document.activeElement===this.elements.handle;this.elements.handle.remove();const t=re(this.config.handleStyle,this.config.orientation,this.state.position);this.elements.container.appendChild(t),this.elements.handle=t,this.elements.handleGrip=t.querySelector(".ci-before-after-handle-grip"),(o=this.sliderGestures)==null||o.destroy(),this.sliderGestures=new ae(this.elements.container,this.elements.handle,this.config.mode,this.config.orientation,{onPositionChange:s=>this.updatePosition(s),onDragStart:()=>this.onDragStart(),onDragEnd:()=>this.onDragEnd()}),(n=this.keyboardHandler)==null||n.destroy(),this.keyboardHandler=new ge(this.elements.handle,this.config.orientation,this.config.keyboardStep,this.config.keyboardLargeStep,this.config.zoom,{onPositionChange:s=>this.updatePosition(s),getPosition:()=>this.state.position,onZoomIn:()=>{var s;return(s=this.zoomPan)==null?void 0:s.zoomIn()},onZoomOut:()=>{var s;return(s=this.zoomPan)==null?void 0:s.zoomOut()},onZoomReset:()=>{var s;return(s=this.zoomPan)==null?void 0:s.resetZoom()}}),this.zoomGestures&&this.zoomPan&&(this.zoomGestures.destroy(),this.zoomGestures=new le(this.elements.container,this.elements.handle,this.zoomPan,()=>{var s;return(s=this.scrollHint)==null?void 0:s.show()})),e&&this.elements.handle.focus()}rebuildLabels(){var e,t;if((e=this.elements.labelBefore)==null||e.remove(),(t=this.elements.labelAfter)==null||t.remove(),this.elements.labelBefore=null,this.elements.labelAfter=null,this.config.labelsEnabled){const o=fe(this.config.labelBefore,this.config.labelAfter,this.config.labelPosition,this.config.orientation);this.elements.labelBefore=o.before,this.elements.labelAfter=o.after,this.elements.container.append(o.before,o.after),de(o.before,o.after,this.state.position,this.config.orientation)}}rebuildZoom(){var e,t,o,n,s;(e=this.zoomGestures)==null||e.destroy(),this.zoomGestures=null,(t=this.scrollHint)==null||t.destroy(),this.scrollHint=null,(o=this.zoomControlsEvents)==null||o.destroy(),this.zoomControlsEvents=null,(n=this.zoomControlsEl)==null||n.remove(),this.zoomControlsEl=null,(s=this.zoomPan)==null||s.destroy(),this.zoomPan=null,this.elements.container.classList.remove("ci-before-after-container--zoom-top-right"),this.elements.container.classList.remove("ci-before-after-container--zoom-top"),this.elements.container.classList.remove("ci-before-after-container--zoom-left"),this.config.zoom&&this.initZoom()}rebuildFullscreen(){var e;(e=this.fullscreenManager)==null||e.destroy(),this.fullscreenManager=null,this.elements.container.classList.remove("ci-before-after-container--has-fullscreen"),this.config.fullscreenButton&&(this.elements.container.classList.add("ci-before-after-container--has-fullscreen"),this.fullscreenManager=new ue(this.elements.container,t=>{this.state.isFullscreen=t,T(this.config.onFullscreenChange,t)}))}initResizeObserver(){typeof ResizeObserver>"u"||(this.resizeObserver=new ResizeObserver(()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(()=>{if(this.config.cloudimage){const e=this.resolveImageSrc(this.config.beforeSrc),t=this.resolveImageSrc(this.config.afterSrc);this.elements.beforeImage.src!==e&&(this.elements.beforeImage.src=e),this.elements.afterImage.src!==t&&(this.elements.afterImage.src=t)}this.resizeDebounceTimer=null},200)}),this.resizeObserver.observe(this.elements.container))}}function T(i,...e){if(i)try{i(...e)}catch(t){console.error("CIBeforeAfter: callback error:",t)}}function it(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),o=Object.keys(e);if(t.length!==o.length)return!1;for(const n of t)if(i[n]!==e[n])return!1;return!0}class p extends tt{static autoInit(e){if(!Le())return[];const o=(e||document).querySelectorAll("[data-ci-before-after-before-src]"),n=[];return o.forEach(s=>{const r=ke(s);n.push(new p(s,r))}),n}constructor(e,t){super(e,t)}}const B="/js-cloudimage-before-after/assets/kitchen-before-BEFuCJ8m.svg",x="/js-cloudimage-before-after/assets/kitchen-after-CpkbbT03.svg",ot=B,nt=x;function st(){const i=document.getElementById("configurator-controls"),e=document.getElementById("generated-code"),t=document.getElementById("copy-code-btn");if(!i||!e||!t)return;const o={mode:"drag",orientation:"horizontal",theme:"light",handleStyle:"arrows",labelPosition:"top",zoomControlsPosition:"bottom-right",initialPosition:50,zoom:!1,labels:!0,fullscreenButton:!0,animate:!1};i.innerHTML=`
    <div class="config-group">
      <div class="config-group-title">General</div>
      <div class="config-group-fields">
        ${L("Mode","mode",[["drag","Drag"],["hover","Hover"],["click","Click"]])}
        ${L("Orientation","orientation",[["horizontal","Horizontal"],["vertical","Vertical"]])}
        ${L("Theme","theme",[["light","Light"],["dark","Dark"]])}
        ${rt("Initial Position","initialPosition",0,100,o.initialPosition)}
      </div>
    </div>
    <div class="config-group">
      <div class="config-group-title">Handle & Labels</div>
      <div class="config-group-fields">
        ${L("Handle Style","handleStyle",[["arrows","Arrows"],["circle","Circle"],["line","Line"]])}
        ${L("Label Position","labelPosition",[["top","Top"],["bottom","Bottom"]])}
        ${Z("Labels","labels",o.labels)}
      </div>
    </div>
    <div class="config-group">
      <div class="config-group-title">Features</div>
      <div class="config-group-fields">
        ${Z("Zoom","zoom",o.zoom)}
        ${Z("Fullscreen Button","fullscreenButton",o.fullscreenButton)}
        ${L("Zoom Controls","zoomControlsPosition",[["bottom-right","Bottom Right"],["bottom-left","Bottom Left"],["bottom-center","Bottom Center"],["top-right","Top Right"],["top-left","Top Left"],["top-center","Top Center"]],!o.zoom)}
        ${Z("Entrance Animation","animate",o.animate)}
      </div>
    </div>
  `;let n=new p("#configurator-slider",{beforeSrc:ot,afterSrc:nt,...pe(o)});const s=document.getElementById("configurator-slider");s&&requestAnimationFrame(()=>{s.style.minHeight=`${s.offsetHeight}px`});function r(){n.update(pe(o)),h()}function h(){e.textContent=be(o),typeof Prism<"u"&&Prism.highlightElement(e)}i.addEventListener("change",a=>{const l=a.target,c=l.dataset.key;if(c){if(l.type==="checkbox"?o[c]=l.checked:l.type==="range"?o[c]=parseInt(l.value):o[c]=l.value,c==="zoom"){const f=i.querySelector('[data-control="zoomControlsPosition"]'),d=f==null?void 0:f.querySelector("select");f&&f.classList.toggle("control-group--disabled",!o.zoom),d&&(d.disabled=!o.zoom)}r()}}),i.addEventListener("input",a=>{var c;const l=a.target;if(l.type==="range"){const f=l.dataset.key;if(f){o[f]=parseInt(l.value);const d=(c=l.closest(".control-group"))==null?void 0:c.querySelector("span");d&&(d.textContent=l.value),r()}}}),t.addEventListener("click",()=>{navigator.clipboard.writeText(be(o)).then(()=>{t.classList.add("copied"),setTimeout(()=>{t.classList.remove("copied")},2e3)})}),h()}function pe(i){return{mode:i.mode,orientation:i.orientation,theme:i.theme,handleStyle:i.handleStyle,labelPosition:i.labelPosition,zoomControlsPosition:i.zoomControlsPosition,initialPosition:i.initialPosition,zoom:i.zoom,labels:i.labels,fullscreenButton:i.fullscreenButton,animate:i.animate}}function be(i){const e=["  beforeSrc: '/before.jpg',","  afterSrc: '/after.jpg',"];return i.mode!=="drag"&&e.push(`  mode: '${i.mode}',`),i.orientation!=="horizontal"&&e.push(`  orientation: '${i.orientation}',`),i.initialPosition!==50&&e.push(`  initialPosition: ${i.initialPosition},`),i.zoom&&e.push("  zoom: true,"),i.theme!=="light"&&e.push(`  theme: '${i.theme}',`),i.handleStyle!=="arrows"&&e.push(`  handleStyle: '${i.handleStyle}',`),i.labels||e.push("  labels: false,"),i.labelPosition!=="top"&&e.push(`  labelPosition: '${i.labelPosition}',`),i.fullscreenButton||e.push("  fullscreenButton: false,"),i.animate&&e.push("  animate: true,"),i.zoom&&i.zoomControlsPosition!=="bottom-right"&&e.push(`  zoomControlsPosition: '${i.zoomControlsPosition}',`),`new CIBeforeAfter('#my-slider', {
${e.join(`
`)}
});`}function L(i,e,t,o=!1){const n=t.map(([s,r])=>`<option value="${s}">${r}</option>`).join("");return`<div class="control-group${o?" control-group--disabled":""}" data-control="${e}">
    <label>${i}</label>
    <select data-key="${e}"${o?" disabled":""}>${n}</select>
  </div>`}function Z(i,e,t){return`<div class="control-group">
    <label class="toggle">
      <input type="checkbox" data-key="${e}" ${t?"checked":""} />
      ${i}
    </label>
  </div>`}function rt(i,e,t,o,n){return`<div class="control-group">
    <label>${i}: <span>${n}</span></label>
    <input type="range" data-key="${e}" min="${t}" max="${o}" value="${n}" />
  </div>`}const O="/js-cloudimage-before-after/assets/landscape-before-vG4KL646.svg",$="/js-cloudimage-before-after/assets/landscape-after-DbjDsLf5.svg",y=document.getElementById("demo-nav"),w=document.getElementById("nav-burger"),E=y==null?void 0:y.querySelector(".demo-nav-links");w==null||w.addEventListener("click",()=>{const i=y.classList.toggle("open");w.setAttribute("aria-expanded",String(i))});E==null||E.querySelectorAll("a").forEach(i=>{i.addEventListener("click",()=>{y==null||y.classList.remove("open"),w==null||w.setAttribute("aria-expanded","false")})});window.addEventListener("scroll",()=>{y==null||y.classList.toggle("scrolled",window.scrollY>8)},{passive:!0});const at=Array.from(document.querySelectorAll("section[id]")),lt=Array.from((E==null?void 0:E.querySelectorAll("a"))??[]);function Ee(){const i=window.scrollY+100;let e="";for(const t of at)t.offsetTop<=i&&(e=t.id);lt.forEach(t=>{t.classList.toggle("active",t.getAttribute("href")===`#${e}`)})}window.addEventListener("scroll",Ee,{passive:!0});Ee();new p("#hero-slider",{beforeSrc:B,afterSrc:x,beforeAlt:"Kitchen before renovation",afterAlt:"Kitchen after renovation",zoom:!0,labels:{before:"Before",after:"After"},animate:{duration:1e3},theme:"dark",handleStyle:"arrows"});new p("#mode-drag",{beforeSrc:O,afterSrc:$,mode:"drag",labels:{before:"Before",after:"After"},fullscreenButton:!1});new p("#mode-hover",{beforeSrc:O,afterSrc:$,mode:"hover",labels:{before:"Before",after:"After"},fullscreenButton:!1});new p("#mode-click",{beforeSrc:O,afterSrc:$,mode:"click",labels:{before:"Before",after:"After"},fullscreenButton:!1});new p("#orientation-horizontal",{beforeSrc:B,afterSrc:x,orientation:"horizontal",labels:!0,fullscreenButton:!1});new p("#orientation-vertical",{beforeSrc:B,afterSrc:x,orientation:"vertical",labels:!0,fullscreenButton:!1});new p("#theme-light",{beforeSrc:O,afterSrc:$,theme:"light",labels:!0,fullscreenButton:!1});new p("#theme-dark",{beforeSrc:O,afterSrc:$,theme:"dark",labels:!0,fullscreenButton:!1});new p("#zoom-demo",{beforeSrc:B,afterSrc:x,zoom:!0,zoomMax:4,labels:{before:"Original",after:"Renovated"},handleStyle:"arrows"});st();{const i=document.querySelectorAll(".demo-also-slide"),e=document.getElementById("also-dots");if(i.length>0&&e){let t=function(a){a.classList.remove("demo-also-slide--enter-right","demo-also-slide--enter-left","demo-also-slide--leave-left","demo-also-slide--leave-right")},o=function(a){if(a===s||r)return;r=!0;const l=a>s||s===i.length-1&&a===0,c=i[s],f=i[a];t(c),c.classList.remove("demo-also-slide--active"),c.classList.add(l?"demo-also-slide--leave-left":"demo-also-slide--leave-right"),t(f),f.classList.add(l?"demo-also-slide--enter-right":"demo-also-slide--enter-left"),f.addEventListener("animationend",function d(){f.removeEventListener("animationend",d),t(c),t(f),f.classList.add("demo-also-slide--active"),r=!1}),s=a,e.querySelectorAll(".demo-also-dot").forEach((d,b)=>{d.classList.toggle("demo-also-dot--active",b===s)}),n()},n=function(){clearInterval(h),h=setInterval(()=>{o((s+1)%i.length)},5e3)},s=0,r=!1,h;for(let a=0;a<i.length;a++){const l=document.createElement("button");l.className=`demo-also-dot${a===0?" demo-also-dot--active":""}`,l.setAttribute("aria-label",`Slide ${a+1}`),l.addEventListener("click",()=>o(a)),e.appendChild(l)}n()}}document.querySelectorAll(".demo-code-wrap .demo-copy-btn").forEach(i=>{i.id!=="copy-code-btn"&&i.addEventListener("click",()=>{var t;const e=(t=i.closest(".demo-code-wrap"))==null?void 0:t.querySelector("code");e&&navigator.clipboard.writeText(e.textContent||"").then(()=>{i.classList.add("copied"),setTimeout(()=>i.classList.remove("copied"),2e3)})})});
